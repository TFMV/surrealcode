# SurrealCode: Go Code Analysis Tool

SurrealCode is a static code analysis tool designed to extract, analyze, and visualize Go code structure. It integrates with **SurrealDB** for storage and querying of code relationships.

## 📐 Architecture

```ascii
+----------------+      +------------------+      +------------------+
|                |      |                  |      |                  |
|  Go Source     | ───> |  Code Parser     | ───> |  Data Models &   |
|  Files         |      |  & Analyzer      |      |  Storage         |
|                |      |                  |      |                  |
+----------------+      +------------------+      +------------------+
       |                         |
       v                         v
+------------------+      +------------------+
|                  |      |                  |
|  Visualization   |      |  SurrealDB        |
|  (DOT/D3.js)    |      |  Graph Database   |
|                  |      |                  |
+------------------+      +------------------+
```

## 📦 Installation

1. Clone the repository:

```bash
git clone https://github.com/TFMV/surrealcode.git
```

2. Install dependencies:

```bash
go mod tidy
```

3. Start SurrealDB:

Please note that you will need to have [SurrealDB](https://github.com/surrealdb/surrealdb?tab=readme-ov-file#getting-started) installed and running on your machine.

```bash
surreal start --user root --pass root --bind 0.0.0.0:8000 memory
```

4. Run the application:

```bash
go run cmd/main.go analyze ./surrealcode/demo
```

## 📊 Metrics

### Code Metrics

- **Function Count**: Total number of functions in the codebase.
- **Struct Count**: Total number of structs in the codebase.
- **Interface Count**: Total number of interfaces in the codebase.
- **Global Variables**: Total number of global variables in the codebase.
- **Import Count**: Total number of imports in the codebase.

### Code Quality Metrics

- **Code Duplication**: Total number of duplicate lines of code in the codebase.
- **Code Complexity**: Total number of complexity metrics in the codebase.
- **Code Maintainability**: Total number of maintainability metrics in the codebase.

### Code Complexity Metrics

- **Cyclomatic Complexity**: Total number of cyclomatic complexity metrics in the codebase.
- **Halstead Metrics**: Total number of halstead metrics in the codebase.
- **Maintainability Index**: Total number of maintainability index metrics in the codebase.

## Summary Report

The summary report is a JSON file that contains the results of the code analysis. It is generated by the `analyze` command.

```bash
StoreAnalysis (db/surreal.go):
  Complexity: 11
  Lines: 1318
  Maintainability: 66.60
  Nesting Depth: 11
  Is Unused: false

AnalyzeFunction (analysis/analyzer.go):
  Complexity: 1
  Lines: 301
  Maintainability: 80.00
  Nesting Depth: 1
  Is Unused: false
```
